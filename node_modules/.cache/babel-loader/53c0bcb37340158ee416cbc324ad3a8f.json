{"ast":null,"code":"var _jsxFileName = \"/Users/macbookpro/Documents/React/bordeaux_p2_sept2019_SpotiWild/src/components/Game.js\";\nimport React from 'react';\nimport CountDown from './Game/CountDown';\nimport YouTube from 'react-youtube';\nimport Score from './Game/Score';\nimport SkipBtn from './Game/SkipBtn';\nimport Answer from './Game/Answer';\nimport ValidateBtn from './Game/ValidateBtn';\nimport Result from './Game/Result';\nimport './Game.css';\nimport Title from './Home/Title';\nimport { arrThemes } from '../data/Playlists';\nimport EndGame from './Game/EndGame';\n\nclass Game extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      turn: 0,\n      theme: '',\n      class_parent: 'game-parent',\n      fakeDiv: 'fake-div',\n      numberCount: 'Go',\n      isPlaying: false,\n      classCount: 'default',\n      videoId: '',\n      opts: {\n        playerVars: {\n          autoplay: 1,\n          start: 5,\n          enablejsapi: 1,\n          origin: 'http://localhost:3000'\n        }\n      },\n      answer: '',\n      possibleAnswers: [],\n      answerState: false,\n      scoreTemp: 0,\n      score: 0,\n      currentSong: '',\n      currentPic: '',\n      currentAuthor: '',\n      currentYear: '',\n      skipAnswer: false,\n      isGameOver: false\n    };\n    this.changeSong = this.changeSong.bind(this);\n    this._onPlay = this._onPlay.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n    this.handleSkip = this.handleSkip.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  componentDidMount() {\n    setTimeout(() => this.setState({\n      class_parent: 'fullvh'\n    }), 100);\n    this.setState({\n      theme: this.props.match.params.theme\n    });\n  }\n\n  changeSong() {\n    // if (this.state.turn === 10) {\n    //   this.setState({\n    //     isGameOver: true,\n    //     numberCount: 'End'\n    //   });\n    // }\n    if (this.state.numberCount === 'Go' || this.state.numberCount === 'Next') {\n      this.setState({\n        answerState: false,\n        turn: this.state.turn + 1\n      });\n      const _this$state = this.state,\n            theme = _this$state.theme,\n            turn = _this$state.turn;\n      let activeArr = arrThemes.filter(el => theme === Object.keys(el)[0]);\n      activeArr = activeArr[0];\n      activeArr = Object.values(activeArr)[0];\n      activeArr = activeArr[turn];\n      this.setState({\n        answer: '',\n        possibleAnswers: activeArr.answers,\n        currentSong: activeArr.name,\n        currentPic: activeArr.pic,\n        currentAuthor: activeArr.author,\n        currentYear: activeArr.year\n      }); // activeArr.map(child => console.log(child));\n\n      this.setState({\n        fakeDiv: 'fake-div-loading',\n        numberCount: 'Loading',\n        videoId: activeArr.url,\n        classCount: 'loading'\n      });\n    }\n\n    console.log(this.state.turn);\n  }\n\n  _onReady(event) {\n    // access to player in all event handlers via event.target\n    event.target.setVolume(100);\n  }\n\n  _onPlay() {\n    console.log('playing');\n    this.setState({\n      fakeDiv: 'fake-div-playing',\n      numberCount: 30,\n      isPlaying: true,\n      classCount: 'playing'\n    });\n    this.timerID = setInterval(() => this.tick(), 1000);\n  }\n\n  componentWillUnmount() {\n    clearInterval(this.timerID); // jsp vraiment mais apparemment faut le garder dans l'exemple de l'horloge que j'ai cannibalisé\n  }\n\n  tick() {\n    if (this.state.answerState === true) {\n      clearInterval(this.timerID);\n      this.setState({\n        classCount: 'default'\n      });\n      this.setState({\n        score: this.state.scoreTemp + this.state.score\n      }); //cumulation du score\n    } else {\n      this.state.isPlaying // si le props startCount défini dans Game.js...\n      ? this.state.numberCount <= 1 || this.state.numberCount === 'cry' // true : si le state number est inférieur ou égal à 0...\n      ? this.setState({\n        numberCount: 'cry'\n      }) // true : ne pas toucher\n      : this.setState({\n        numberCount: this.state.numberCount - 1\n      }) // false : nombre - 1\n      : this.setState({\n        numberCount: this.state.numberCount\n      });\n      this.setState({\n        scoreTemp: parseInt(this.state.numberCount) || 0\n      }); //memorise le compteur pour le score et mets 0 si string au lieu de number\n    } // false : ne pas toucher\n\n  }\n\n  handleChange(event) {\n    this.setState({\n      answer: event.target.value\n    });\n    console.log(this.state.answer);\n  }\n\n  handleSkip(event) {\n    if (this.state.turn === 10) {\n      this.setState({\n        isGameOver: true,\n        numberCount: 'End'\n      });\n      this.setState({\n        answerState: true,\n        numberCount: 'Next',\n        skipAnswer: false\n      });\n      this.setState({\n        scoreTemp: 0\n      });\n    }\n  }\n\n  handleSubmit(event) {\n    let answerResult = 'NUL';\n\n    for (let i = 0; i < this.state.possibleAnswers.length; i++) {\n      if (this.state.answer === this.state.possibleAnswers[i]) {\n        this.setState({\n          answerState: true\n        });\n        answerResult = 'YES';\n\n        if (this.state.turn === 10) {\n          this.setState({\n            isGameOver: true,\n            numberCount: 'End'\n          });\n        } else {\n          this.setState({\n            numberCount: 'Next'\n          });\n        }\n\n        document.getElementById('input-answer').classList.add('goodAnswer');\n        setTimeout(function () {\n          document.getElementById('input-answer').classList.remove('goodAnswer');\n        }, 1000);\n        return console.log(answerResult);\n      } else {}\n    }\n\n    if (this.state.answerState === false) {\n      document.getElementById('input-answer').classList.add('wrongAnswer');\n      setTimeout(function () {\n        document.getElementById('input-answer').classList.remove('wrongAnswer');\n      }, 1000);\n    }\n\n    return console.log(answerResult);\n  }\n\n  render() {\n    // console.log(this.state.score)\n    return React.createElement(\"div\", {\n      className: this.state.class_parent,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182\n      },\n      __self: this\n    }, React.createElement(Title, {\n      theme: this.state.theme,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183\n      },\n      __self: this\n    }), React.createElement(EndGame, {\n      toggleEnd: this.state.isGameOver,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184\n      },\n      __self: this\n    }), React.createElement(Result, {\n      name: this.state.currentSong,\n      author: this.state.currentAuthor,\n      year: this.state.currentYear,\n      picture: this.state.currentPic,\n      toggle: this.state.answerState,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"fake-div-parent\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: this.state.fakeDiv,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196\n      },\n      __self: this\n    }), React.createElement(CountDown, {\n      onClick: () => this.changeSong('ZHapXKq0yOY'),\n      className: this.state.classCount,\n      number: this.state.numberCount,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"landscape-mode\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205\n      },\n      __self: this\n    }, React.createElement(Answer, {\n      parentMethodAnswer: this.handleChange,\n      parentAnswer: this.state.answer,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208\n      },\n      __self: this\n    }, React.createElement(SkipBtn, {\n      parentMethodSkip: this.handleSkip,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209\n      },\n      __self: this\n    }), React.createElement(ValidateBtn, {\n      parentMethodValidate: this.handleSubmit,\n      parentAnswer: this.state.answer,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211\n      },\n      __self: this\n    }))), React.createElement(\"p\", {\n      className: \"nick\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 218\n      },\n      __self: this\n    }, this.props.match.params.nickname), React.createElement(Score, {\n      transferSkipAnswer: this.state.skipAnswer,\n      transferScore: this.state.score,\n      transferAnswerState: this.state.answerState,\n      transferTurnSong: this.state.turn,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 220\n      },\n      __self: this\n    }), React.createElement(YouTube, {\n      className: \"yt-hidden\",\n      videoId: this.state.videoId,\n      opts: this.state.opts,\n      onReady: this._onReady,\n      onPlay: this._onPlay,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 227\n      },\n      __self: this\n    }));\n  }\n\n}\n\nexport default Game;","map":{"version":3,"sources":["/Users/macbookpro/Documents/React/bordeaux_p2_sept2019_SpotiWild/src/components/Game.js"],"names":["React","CountDown","YouTube","Score","SkipBtn","Answer","ValidateBtn","Result","Title","arrThemes","EndGame","Game","Component","constructor","props","state","turn","theme","class_parent","fakeDiv","numberCount","isPlaying","classCount","videoId","opts","playerVars","autoplay","start","enablejsapi","origin","answer","possibleAnswers","answerState","scoreTemp","score","currentSong","currentPic","currentAuthor","currentYear","skipAnswer","isGameOver","changeSong","bind","_onPlay","handleChange","handleSkip","handleSubmit","componentDidMount","setTimeout","setState","match","params","activeArr","filter","el","Object","keys","values","answers","name","pic","author","year","url","console","log","_onReady","event","target","setVolume","timerID","setInterval","tick","componentWillUnmount","clearInterval","parseInt","value","answerResult","i","length","document","getElementById","classList","add","remove","render","nickname"],"mappings":"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","sourcesContent":["import React from 'react';\nimport CountDown from './Game/CountDown';\nimport YouTube from 'react-youtube';\nimport Score from './Game/Score';\nimport SkipBtn from './Game/SkipBtn';\nimport Answer from './Game/Answer';\nimport ValidateBtn from './Game/ValidateBtn';\nimport Result from './Game/Result';\nimport './Game.css';\nimport Title from './Home/Title';\nimport { arrThemes } from '../data/Playlists';\nimport EndGame from './Game/EndGame';\n\nclass Game extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      turn: 0,\n      theme: '',\n      class_parent: 'game-parent',\n      fakeDiv: 'fake-div',\n      numberCount: 'Go',\n      isPlaying: false,\n      classCount: 'default',\n      videoId: '',\n      opts: {\n        playerVars: {\n          autoplay: 1,\n          start: 5,\n          enablejsapi: 1,\n          origin: 'http://localhost:3000'\n        }\n      },\n      answer: '',\n      possibleAnswers: [],\n      answerState: false,\n      scoreTemp: 0,\n      score: 0,\n      currentSong: '',\n      currentPic: '',\n      currentAuthor: '',\n      currentYear: '',\n      skipAnswer: false,\n      isGameOver: false\n    };\n    this.changeSong = this.changeSong.bind(this);\n    this._onPlay = this._onPlay.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n    this.handleSkip = this.handleSkip.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  componentDidMount() {\n    setTimeout(() => this.setState({ class_parent: 'fullvh' }), 100);\n    this.setState({ theme: this.props.match.params.theme });\n  }\n\n  changeSong() {\n    // if (this.state.turn === 10) {\n    //   this.setState({\n    //     isGameOver: true,\n    //     numberCount: 'End'\n    //   });\n    // }\n\n    if (this.state.numberCount === 'Go' || this.state.numberCount === 'Next') {\n      this.setState({ answerState: false, turn: this.state.turn + 1 });\n\n      const { theme, turn } = this.state;\n      let activeArr = arrThemes.filter(el => theme === Object.keys(el)[0]);\n      activeArr = activeArr[0];\n      activeArr = Object.values(activeArr)[0];\n      activeArr = activeArr[turn];\n      this.setState({\n        answer: '',\n        possibleAnswers: activeArr.answers,\n        currentSong: activeArr.name,\n        currentPic: activeArr.pic,\n        currentAuthor: activeArr.author,\n        currentYear: activeArr.year\n      });\n      // activeArr.map(child => console.log(child));\n\n      this.setState({\n        fakeDiv: 'fake-div-loading',\n        numberCount: 'Loading',\n        videoId: activeArr.url,\n        classCount: 'loading'\n      });\n    }\n    console.log(this.state.turn);\n  }\n\n  _onReady(event) {\n    // access to player in all event handlers via event.target\n    event.target.setVolume(100);\n  }\n\n  _onPlay() {\n    console.log('playing');\n    this.setState({\n      fakeDiv: 'fake-div-playing',\n      numberCount: 30,\n      isPlaying: true,\n      classCount: 'playing'\n    });\n    this.timerID = setInterval(() => this.tick(), 1000);\n  }\n\n  componentWillUnmount() {\n    clearInterval(this.timerID); // jsp vraiment mais apparemment faut le garder dans l'exemple de l'horloge que j'ai cannibalisé\n  }\n\n  tick() {\n    if (this.state.answerState === true) {\n      clearInterval(this.timerID);\n      this.setState({ classCount: 'default' });\n      this.setState({ score: this.state.scoreTemp + this.state.score }); //cumulation du score\n    } else {\n      this.state.isPlaying // si le props startCount défini dans Game.js...\n        ? this.state.numberCount <= 1 || this.state.numberCount === 'cry' // true : si le state number est inférieur ou égal à 0...\n          ? this.setState({\n              numberCount: 'cry'\n            }) // true : ne pas toucher\n          : this.setState({ numberCount: this.state.numberCount - 1 }) // false : nombre - 1\n        : this.setState({ numberCount: this.state.numberCount });\n      this.setState({ scoreTemp: parseInt(this.state.numberCount) || 0 }); //memorise le compteur pour le score et mets 0 si string au lieu de number\n    } // false : ne pas toucher\n  }\n\n  handleChange(event) {\n    this.setState({ answer: event.target.value });\n    console.log(this.state.answer);\n  }\n\n  handleSkip(event) {\n    if (this.state.turn === 10) {\n      this.setState({\n        isGameOver: true,\n        numberCount: 'End'\n      });\n      this.setState({ answerState: true, numberCount: 'Next', skipAnswer: false });\n      this.setState({ scoreTemp: 0 });\n    }\n  }\n\n  handleSubmit(event) {\n    let answerResult = 'NUL';\n    for (let i = 0; i < this.state.possibleAnswers.length; i++) {\n      if (this.state.answer === this.state.possibleAnswers[i]) {\n        this.setState({ answerState: true });\n        answerResult = 'YES';\n        if (this.state.turn === 10) {\n          this.setState({\n            isGameOver: true,\n            numberCount: 'End'\n          });\n        } else {\n          this.setState({ numberCount: 'Next' });\n        }\n\n        document.getElementById('input-answer').classList.add('goodAnswer');\n        setTimeout(function() {\n          document.getElementById('input-answer').classList.remove('goodAnswer');\n        }, 1000);\n        return console.log(answerResult);\n      } else {\n      }\n    }\n    if (this.state.answerState === false) {\n      document.getElementById('input-answer').classList.add('wrongAnswer');\n      setTimeout(function() {\n        document.getElementById('input-answer').classList.remove('wrongAnswer');\n      }, 1000);\n    }\n    return console.log(answerResult);\n  }\n\n  render() {\n    // console.log(this.state.score)\n    return (\n      <div className={this.state.class_parent}>\n        <Title theme={this.state.theme} />\n        <EndGame toggleEnd={this.state.isGameOver} />\n        <Result\n          name={this.state.currentSong}\n          author={this.state.currentAuthor}\n          year={this.state.currentYear}\n          picture={this.state.currentPic}\n          toggle={this.state.answerState}\n        />\n\n        <div className=\"fake-div-parent\">\n          {/*fake divs importantes pour l'anim du loading*/}\n\n          <div className={this.state.fakeDiv}></div>\n\n          <CountDown\n            onClick={() => this.changeSong('ZHapXKq0yOY')}\n            className={this.state.classCount}\n            number={this.state.numberCount}\n          />\n        </div>\n\n        <div className=\"landscape-mode\">\n          <Answer parentMethodAnswer={this.handleChange} parentAnswer={this.state.answer} />\n\n          <div className=\"row\">\n            <SkipBtn parentMethodSkip={this.handleSkip} />\n\n            <ValidateBtn\n              parentMethodValidate={this.handleSubmit}\n              parentAnswer={this.state.answer}\n            />\n          </div>\n        </div>\n\n        <p className=\"nick\">{this.props.match.params.nickname}</p>\n\n        <Score\n          transferSkipAnswer={this.state.skipAnswer}\n          transferScore={this.state.score}\n          transferAnswerState={this.state.answerState}\n          transferTurnSong={this.state.turn}\n        />\n\n        <YouTube\n          className=\"yt-hidden\"\n          videoId={this.state.videoId}\n          opts={this.state.opts}\n          onReady={this._onReady}\n          onPlay={this._onPlay}\n        />\n      </div>\n    );\n  }\n}\n\nexport default Game;\n"]},"metadata":{},"sourceType":"module"}