{"ast":null,"code":"var _jsxFileName = \"/Users/macbookpro/Documents/React/bordeaux_p2_sept2019_SpotiWild/src/components/Game.js\";\nimport React from 'react';\nimport CountDown from './Game/CountDown';\nimport YouTube from 'react-youtube';\nimport Score from './Game/Score';\nimport SkipBtn from './Game/SkipBtn';\nimport Answer from './Game/Answer';\nimport ValidateBtn from './Game/ValidateBtn';\nimport Result from './Game/Result';\nimport './Game.css';\nimport Title from './Home/Title';\nimport { arrThemes } from '../data/Playlists';\nimport EndGame from './Game/EndGame';\n\nclass Game extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      wasItGoodAnswer: false,\n      turn: 0,\n      theme: '',\n      class_parent: 'game-parent',\n      fakeDiv: 'fake-div',\n      numberCount: 'Go',\n      isPlaying: false,\n      classCount: 'default',\n      videoId: '',\n      opts: {\n        playerVars: {\n          autoplay: 1,\n          start: 0,\n          enablejsapi: 1,\n          origin: 'http://localhost:3000'\n        }\n      },\n      answer: '',\n      possibleAnswers: [],\n      answerState: false,\n      scoreTemp: 0,\n      score: 0,\n      currentSong: '',\n      currentPic: '',\n      currentAuthor: '',\n      currentYear: '',\n      skipAnswer: false,\n      isGameOver: false\n    };\n    this.changeSong = this.changeSong.bind(this);\n    this._onPlay = this._onPlay.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n    this.handleSkip = this.handleSkip.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.handleEnter = this.handleEnter.bind(this);\n  }\n\n  componentDidMount() {\n    setTimeout(() => this.setState({\n      class_parent: 'fullvh'\n    }), 100);\n    this.setState({\n      theme: this.props.match.params.theme\n    });\n  }\n\n  changeSong() {\n    if (this.state.numberCount === 'End') {\n      this.setState({\n        isGameOver: true,\n        answerState: false\n      });\n    }\n\n    if (this.state.numberCount === 'Go' || this.state.numberCount === 'Next') {\n      this.setState({\n        answerState: false,\n        turn: this.state.turn + 1\n      });\n      const _this$state = this.state,\n            theme = _this$state.theme,\n            turn = _this$state.turn;\n      let activeArr = arrThemes.filter(el => theme === Object.keys(el)[0]);\n      activeArr = activeArr[0];\n      activeArr = Object.values(activeArr)[0];\n      activeArr = activeArr[turn];\n      this.setState({\n        answer: '',\n        possibleAnswers: activeArr.answers,\n        currentSong: activeArr.name,\n        currentPic: activeArr.pic,\n        currentAuthor: activeArr.author,\n        currentYear: activeArr.year\n      });\n      this.setState({\n        fakeDiv: 'fake-div-loading',\n        numberCount: 'Loading',\n        videoId: activeArr.url,\n        classCount: 'loading'\n      });\n    }\n  }\n\n  _onReady(event) {\n    // access to player in all event handlers via event.target\n    event.target.setVolume(100);\n  }\n\n  _onPlay() {\n    this.setState({\n      fakeDiv: 'fake-div-playing',\n      numberCount: 30,\n      isPlaying: true,\n      classCount: 'playing'\n    });\n    this.timerID = setInterval(() => this.tick(), 1000);\n  }\n\n  componentWillUnmount() {\n    clearInterval(this.timerID); // jsp vraiment mais apparemment faut le garder dans l'exemple de l'horloge que j'ai cannibalisé\n  }\n\n  tick() {\n    if (this.state.answerState === true && typeof this.state.numberCount !== 'number') {\n      clearInterval(this.timerID);\n      this.setState({\n        classCount: 'default'\n      });\n      this.setState({\n        score: this.state.scoreTemp + this.state.score\n      }); //cumulation du score\n    } else {\n      this.state.isPlaying && this.state.numberCount > 0 // si le props startCount défini dans Game.js...\n      ? this.state.numberCount <= 1 || this.state.numberCount === 'Next' // true : si le state number est inférieur ou égal à 0...\n      ? this.handleSkip() : // true : ne pas toucher\n      this.setState({\n        numberCount: this.state.numberCount - 1\n      }) // false : nombre - 1\n      : this.setState({\n        numberCount: this.state.numberCount\n      });\n      this.setState({\n        scoreTemp: parseInt(this.state.numberCount) || 0\n      }); //memorise le compteur pour le score et mets 0 si string au lieu de number\n    } // false : ne pas toucher\n\n  }\n\n  handleChange(event) {\n    this.setState({\n      answer: event.target.value\n    });\n  }\n\n  handleSkip(event) {\n    if (this.state.numberCount === 'Next' || this.state.numberCount === 'Loading' || this.state.turn === 0) {\n      return;\n    } else {\n      if (this.state.turn === 10) {\n        this.setState({\n          answerState: true,\n          numberCount: 'End',\n          skipAnswer: false,\n          wasItGoodAnswer: false,\n          classCount: 'default'\n        });\n        this.setState({\n          scoreTemp: 0\n        });\n      } else {\n        this.setState({\n          answerState: true,\n          numberCount: 'Next',\n          skipAnswer: false,\n          wasItGoodAnswer: false,\n          classCount: 'default'\n        });\n        this.setState({\n          scoreTemp: 0\n        });\n      }\n    }\n  }\n\n  handleSubmit(event) {\n    for (let i = 0; i < this.state.possibleAnswers.length; i++) {\n      if (this.state.answer === this.state.possibleAnswers[i]) {\n        this.setState({\n          answerState: true,\n          wasItGoodAnswer: true\n        });\n\n        if (this.state.turn === 10) {\n          this.setState({\n            numberCount: 'End',\n            classCount: 'default'\n          });\n        } else {\n          this.setState({\n            numberCount: 'Next',\n            classCount: 'default'\n          });\n        }\n\n        document.getElementById('input-answer').classList.add('goodAnswer');\n        setTimeout(function () {\n          document.getElementById('input-answer').classList.remove('goodAnswer');\n        }, 1000);\n      } else {}\n    }\n\n    if (this.state.answerState === false) {\n      document.getElementById('input-answer').classList.add('wrongAnswer');\n      setTimeout(function () {\n        document.getElementById('input-answer').classList.remove('wrongAnswer');\n      }, 1000);\n    }\n  }\n\n  handleEnter() {\n    this.handleSubmit();\n    this.changeSong();\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: this.state.class_parent,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194\n      },\n      __self: this\n    }, React.createElement(Title, {\n      theme: this.state.theme,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195\n      },\n      __self: this\n    }), React.createElement(EndGame, {\n      toggleEnd: this.state.isGameOver,\n      nickname: this.props.match.params.nickname,\n      score: this.state.score,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196\n      },\n      __self: this\n    }), React.createElement(Result, {\n      isGood: this.state.wasItGoodAnswer,\n      name: this.state.currentSong,\n      author: this.state.currentAuthor,\n      year: this.state.currentYear,\n      picture: this.state.currentPic,\n      toggle: this.state.answerState,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"fake-div-parent\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: this.state.fakeDiv,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213\n      },\n      __self: this\n    }), React.createElement(CountDown, {\n      onClick: () => this.changeSong('ZHapXKq0yOY'),\n      className: this.state.classCount,\n      number: this.state.numberCount,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 215\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"landscape-mode\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 222\n      },\n      __self: this\n    }, React.createElement(Answer, {\n      parentMethodAnswer: this.handleChange,\n      parentAnswer: this.state.answer,\n      onKeyPressed: this.handleEnter,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 223\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 229\n      },\n      __self: this\n    }, React.createElement(SkipBtn, {\n      parentMethodSkip: this.handleSkip,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 230\n      },\n      __self: this\n    }), React.createElement(ValidateBtn, {\n      parentMethodValidate: this.handleSubmit,\n      parentAnswer: this.state.answer,\n      onKeyPressed: this.handleEnter,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 232\n      },\n      __self: this\n    }))), React.createElement(\"p\", {\n      className: \"nick\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 240\n      },\n      __self: this\n    }, this.props.match.params.nickname), React.createElement(Score, {\n      transferSkipAnswer: this.state.skipAnswer,\n      transferScore: this.state.score,\n      transferAnswerState: this.state.answerState,\n      transferTurnSong: this.state.turn,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 242\n      },\n      __self: this\n    }), React.createElement(YouTube, {\n      className: \"yt-hidden\",\n      videoId: this.state.videoId,\n      opts: this.state.opts,\n      onReady: this._onReady,\n      onPlay: this._onPlay,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 249\n      },\n      __self: this\n    }));\n  }\n\n}\n\nexport default Game;","map":{"version":3,"sources":["/Users/macbookpro/Documents/React/bordeaux_p2_sept2019_SpotiWild/src/components/Game.js"],"names":["React","CountDown","YouTube","Score","SkipBtn","Answer","ValidateBtn","Result","Title","arrThemes","EndGame","Game","Component","constructor","props","state","wasItGoodAnswer","turn","theme","class_parent","fakeDiv","numberCount","isPlaying","classCount","videoId","opts","playerVars","autoplay","start","enablejsapi","origin","answer","possibleAnswers","answerState","scoreTemp","score","currentSong","currentPic","currentAuthor","currentYear","skipAnswer","isGameOver","changeSong","bind","_onPlay","handleChange","handleSkip","handleSubmit","handleEnter","componentDidMount","setTimeout","setState","match","params","activeArr","filter","el","Object","keys","values","answers","name","pic","author","year","url","_onReady","event","target","setVolume","timerID","setInterval","tick","componentWillUnmount","clearInterval","parseInt","value","i","length","document","getElementById","classList","add","remove","render","nickname"],"mappings":"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","sourcesContent":["import React from 'react';\nimport CountDown from './Game/CountDown';\nimport YouTube from 'react-youtube';\nimport Score from './Game/Score';\nimport SkipBtn from './Game/SkipBtn';\nimport Answer from './Game/Answer';\nimport ValidateBtn from './Game/ValidateBtn';\nimport Result from './Game/Result';\nimport './Game.css';\nimport Title from './Home/Title';\nimport { arrThemes } from '../data/Playlists';\nimport EndGame from './Game/EndGame';\n\nclass Game extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      wasItGoodAnswer: false,\n      turn: 0,\n      theme: '',\n      class_parent: 'game-parent',\n      fakeDiv: 'fake-div',\n      numberCount: 'Go',\n      isPlaying: false,\n      classCount: 'default',\n      videoId: '',\n      opts: {\n        playerVars: {\n          autoplay: 1,\n          start: 0,\n          enablejsapi: 1,\n          origin: 'http://localhost:3000'\n        }\n      },\n      answer: '',\n      possibleAnswers: [],\n      answerState: false,\n      scoreTemp: 0,\n      score: 0,\n      currentSong: '',\n      currentPic: '',\n      currentAuthor: '',\n      currentYear: '',\n      skipAnswer: false,\n      isGameOver: false\n    };\n    this.changeSong = this.changeSong.bind(this);\n    this._onPlay = this._onPlay.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n    this.handleSkip = this.handleSkip.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.handleEnter = this.handleEnter.bind(this);\n  }\n\n  componentDidMount() {\n    setTimeout(() => this.setState({ class_parent: 'fullvh' }), 100);\n    this.setState({ theme: this.props.match.params.theme });\n  }\n\n  changeSong() {\n    if (this.state.numberCount === 'End') {\n      this.setState({ isGameOver: true, answerState: false });\n    }\n\n    if (this.state.numberCount === 'Go' || this.state.numberCount === 'Next') {\n      this.setState({ answerState: false, turn: this.state.turn + 1 });\n\n      const { theme, turn } = this.state;\n      let activeArr = arrThemes.filter(el => theme === Object.keys(el)[0]);\n      activeArr = activeArr[0];\n      activeArr = Object.values(activeArr)[0];\n      activeArr = activeArr[turn];\n      this.setState({\n        answer: '',\n        possibleAnswers: activeArr.answers,\n        currentSong: activeArr.name,\n        currentPic: activeArr.pic,\n        currentAuthor: activeArr.author,\n        currentYear: activeArr.year\n      });\n\n      this.setState({\n        fakeDiv: 'fake-div-loading',\n        numberCount: 'Loading',\n        videoId: activeArr.url,\n        classCount: 'loading'\n      });\n    }\n  }\n\n  _onReady(event) {\n    // access to player in all event handlers via event.target\n    event.target.setVolume(100);\n  }\n\n  _onPlay() {\n    this.setState({\n      fakeDiv: 'fake-div-playing',\n      numberCount: 30,\n      isPlaying: true,\n      classCount: 'playing'\n    });\n    this.timerID = setInterval(() => this.tick(), 1000);\n  }\n\n  componentWillUnmount() {\n    clearInterval(this.timerID); // jsp vraiment mais apparemment faut le garder dans l'exemple de l'horloge que j'ai cannibalisé\n  }\n\n  tick() {\n    if (this.state.answerState === true && typeof this.state.numberCount !== 'number') {\n      clearInterval(this.timerID);\n      this.setState({ classCount: 'default' });\n      this.setState({ score: this.state.scoreTemp + this.state.score }); //cumulation du score\n    } else {\n      this.state.isPlaying && this.state.numberCount > 0 // si le props startCount défini dans Game.js...\n        ? this.state.numberCount <= 1 || this.state.numberCount === 'Next' // true : si le state number est inférieur ou égal à 0...\n          ? this.handleSkip()\n          : // true : ne pas toucher\n            this.setState({ numberCount: this.state.numberCount - 1 }) // false : nombre - 1\n        : this.setState({ numberCount: this.state.numberCount });\n      this.setState({ scoreTemp: parseInt(this.state.numberCount) || 0 }); //memorise le compteur pour le score et mets 0 si string au lieu de number\n    } // false : ne pas toucher\n  }\n\n  handleChange(event) {\n    this.setState({ answer: event.target.value });\n  }\n\n  handleSkip(event) {\n    if (\n      this.state.numberCount === 'Next' ||\n      this.state.numberCount === 'Loading' ||\n      this.state.turn === 0\n    ) {\n      return;\n    } else {\n      if (this.state.turn === 10) {\n        this.setState({\n          answerState: true,\n          numberCount: 'End',\n          skipAnswer: false,\n          wasItGoodAnswer: false,\n          classCount: 'default'\n        });\n        this.setState({ scoreTemp: 0 });\n      } else {\n        this.setState({\n          answerState: true,\n          numberCount: 'Next',\n          skipAnswer: false,\n          wasItGoodAnswer: false,\n          classCount: 'default'\n        });\n        this.setState({ scoreTemp: 0 });\n      }\n    }\n  }\n\n  handleSubmit(event) {\n    for (let i = 0; i < this.state.possibleAnswers.length; i++) {\n      if (this.state.answer === this.state.possibleAnswers[i]) {\n        this.setState({ answerState: true, wasItGoodAnswer: true });\n        if (this.state.turn === 10) {\n          this.setState({\n            numberCount: 'End',\n            classCount: 'default'\n          });\n        } else {\n          this.setState({ numberCount: 'Next', classCount: 'default' });\n        }\n\n        document.getElementById('input-answer').classList.add('goodAnswer');\n        setTimeout(function() {\n          document.getElementById('input-answer').classList.remove('goodAnswer');\n        }, 1000);\n      } else {\n      }\n    }\n    if (this.state.answerState === false) {\n      document.getElementById('input-answer').classList.add('wrongAnswer');\n      setTimeout(function() {\n        document.getElementById('input-answer').classList.remove('wrongAnswer');\n      }, 1000);\n    }\n  }\n  handleEnter() {\n    this.handleSubmit();\n    this.changeSong();\n  }\n\n  render() {\n    return (\n      <div className={this.state.class_parent}>\n        <Title theme={this.state.theme} />\n        <EndGame\n          toggleEnd={this.state.isGameOver}\n          nickname={this.props.match.params.nickname}\n          score={this.state.score}\n        />\n        <Result\n          isGood={this.state.wasItGoodAnswer}\n          name={this.state.currentSong}\n          author={this.state.currentAuthor}\n          year={this.state.currentYear}\n          picture={this.state.currentPic}\n          toggle={this.state.answerState}\n        />\n\n        <div className=\"fake-div-parent\">\n          {/*fake divs importantes pour l'anim du loading*/}\n\n          <div className={this.state.fakeDiv}></div>\n\n          <CountDown\n            onClick={() => this.changeSong('ZHapXKq0yOY')}\n            className={this.state.classCount}\n            number={this.state.numberCount}\n          />\n        </div>\n\n        <div className=\"landscape-mode\">\n          <Answer\n            parentMethodAnswer={this.handleChange}\n            parentAnswer={this.state.answer}\n            onKeyPressed={this.handleEnter}\n          />\n\n          <div className=\"row\">\n            <SkipBtn parentMethodSkip={this.handleSkip} />\n\n            <ValidateBtn\n              parentMethodValidate={this.handleSubmit}\n              parentAnswer={this.state.answer}\n              onKeyPressed={this.handleEnter}\n            />\n          </div>\n        </div>\n\n        <p className=\"nick\">{this.props.match.params.nickname}</p>\n\n        <Score\n          transferSkipAnswer={this.state.skipAnswer}\n          transferScore={this.state.score}\n          transferAnswerState={this.state.answerState}\n          transferTurnSong={this.state.turn}\n        />\n\n        <YouTube\n          className=\"yt-hidden\"\n          videoId={this.state.videoId}\n          opts={this.state.opts}\n          onReady={this._onReady}\n          onPlay={this._onPlay}\n        />\n      </div>\n    );\n  }\n}\n\nexport default Game;\n"]},"metadata":{},"sourceType":"module"}